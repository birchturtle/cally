package main

import (
	"database/sql"
	"fmt"
	"strconv"

	_ "github.com/mattn/go-sqlite3"
)

func createDb(db string) {
	database, _ :=
		sql.Open("sqlite3", ("./" + db))

	defer database.Close()

	statement, _ :=
		database.Prepare(
			"CREATE TABLE IF NOT EXISTS notes (id INTEGER PRIMARY KEY, content TEXT)")
	statement.Exec()

	statement, _ =
		database.Prepare(
			"CREATE TABLE IF NOT EXISTS events (id INTEGER PRIMARY KEY, title TEXT, long_desc TEXT)")
	statement.Exec()
}

func createNote(text string, db string) {
	database, _ :=
		sql.Open("sqlite3", (db))

	defer database.Close()

	statement, _ :=
		database.Prepare(
			"INSERT INTO notes (content) VALUES (?)")
	statement.Exec(text)
}

func deleteNote(delId int, db string) {
	database, _ :=
		sql.Open("sqlite3", (db))

	defer database.Close()

	statement, _ :=
		database.Prepare(
			"DELETE FROM notes WHERE id = ?")
	statement.Exec(delId)
}

func readNotes(db string) {
	database, _ :=
		sql.Open("sqlite3", (db))

	defer database.Close()

	rows, _ :=
		database.Query(
			"SELECT id, content FROM notes")

	var id int
	var content string

	for rows.Next() {
		rows.Scan(&id, &content)
		fmt.Println(
			strconv.Itoa(id) + ": " + content)
	}
}
